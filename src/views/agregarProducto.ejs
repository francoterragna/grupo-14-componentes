<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head.ejs') %>
    <title>Agregar producto</title>
</head>
<body>
    <%- include('./partials/header.ejs') %>
    
    <main>
        <div class="container-form">
            <h2>Agregar un producto</h2><br>
            <form action="/administrador/agregarProducto" method="POST" enctype="multipart/form-data">

                <div class= 'contenedor-formulario-flex'>

                    <div class='formulario-flex-1'>

                        <div>
                            <label for="nuevo-producto">Nombre del producto</label> <br>
                            <input type="text" class="ingresar-texto nameProduct" name="name" value="<%= locals.oldData ? oldData.name : null %>" >
                            <ul  style ='padding: 0px' class='error-nameProduct text-danger'></ul>
                <br>
                            <% if (locals.errors && errors.name) { %>
                                <div class="text-danger"> <%= errors.name.msg %>   </div>
                            <% } %>
                            
                        </div>
                        <div>
                            <label for="descripcion-producto">Descripción del producto</label><br>
                            <textarea name="description" id="" cols="43" rows="5" class="descripcion-producto"><%= locals.oldData ? oldData.description : null %></textarea>
                            <ul  style ='padding: 0px' class='errorDescipcion text-danger'></ul>
                            <% if (locals.errors && errors.description) { %>
                                <div class="text-danger"> <%= errors.description.msg %>   </div>
                            <% } %>
                        </div>
                        <div>
                            <label for="insertar-imagen" class="label-insertar-img">Insertar imágenes</label> <br> <br>
                            <input type="file" name="imagenProductoNuevo" src="imagenProductoNuevo" alt="img-producto-nuevo" class='file-select' value="<%= locals.oldData ? oldData.imagenProductoNuevo : null %>" multiple>
                            <br><br>
                            <% if(locals.errors && errors.imagenProductoNuevo){ %> 
                                <div class='text-danger'><%= errors.imagenProductoNuevo.msg %> </div>
                                <% } %> 
                        </div><br>

                    </div>

                        <div class='formulario-flex-1'>

                        <div>
                            <label for="categoria-producto">Categoría</label><br>
                            <select name="category" id="categoria-producto" class="ingresar-texto" >
                                <% categories.forEach(category => { %>
                                    
                                    <option value="<%=category.id%>">  <%=category.name%></option>

                                    <% }) %> 
                            </select>
                        </div>
                        <div>
                            <label for="">Talle</label><br>
                            <% sizes.forEach(size => { %>
                            <input type="checkbox" name="<%= size.name %>" id="sizes" class="tallesProducto">
                            <label for="sizes" style="margin-bottom: 20px;"><%= size.name %> </label>
                            <% }) %>
                            <ul  style ='padding: 0px' class='errorTallesProducto text-danger'></ul>
                        </div>

                        <div>
                            <label for="descuento">Descuento</label><br>
                            <input type="number" name="discount" value="<%= locals.oldData ? oldData.discount : null %>" class="ingresar-texto">
                        </div>
                        <div>
                            <label for="precio">Precio</label><br>
                            <span>$  </span><input type="number" name="price" id="precio-producto" value="<%= locals.oldData ? oldData.price : null %>"class="ingresar-texto precioProducto" >
                            <ul  style ='padding: 0px' class='errorPrecioProducto text-danger'></ul>
                            <% if(locals.errors && errors.price){ %> 
                                <div class='text-danger'><%= errors.price.msg %> </div>
                                <% } %> 
                        </div>
                        <div>
                            <label for="stock">Stock</label><br>
                            <input type="number" value=0 name="stock" id="stock-producto" value="<%= locals.oldData ? oldData.price : null %>" class="ingresar-texto stockProducto" >
                            <ul  style ='padding: 0px' class='errorStockProducto text-danger'></ul>
                        </div>

                    </div>

                </div>

                <input type="submit" value="Agregar" class="agregar-submit">
            </form>
        </div>
    </main>

    <%- include('./partials/footer.ejs') %>
    <script type="text/javascript" src="../jquey/jquery-3.6.0.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/agregarProductoValidation.js"></script>
</body>
</html>